# 菜单管理页面测试计划

> 目标页面：`/Users/tigerhuang/cofeplus/menu-management.html`
>  
> 版本日期：2026-02-26

## 1. 测试目标
- 验证菜单管理页面在桌面端优先场景下的核心业务可用性与稳定性。
- 验证设备切换、语言管理、分类商品管理、页面跳转等关键链路无阻塞缺陷。
- 为后续回归测试提供可复用的标准用例集合。

## 2. 测试范围

### 2.1 范围内
- 页面入口与基础UI加载
- 顶部平台语言选择器
- 设备搜索与设备切换
- 设备支持语言标签与“新增语言”管理弹窗
- 分类管理（新增、编辑、删除）
- 商品管理（新增、编辑、上下架、详情跳转）
- 统计卡片数据联动
- 本地存储数据读取（`menuProductEdits`）
- 基础响应式表现（桌面主测，移动端冒烟）

### 2.2 范围外
- 后端接口联调（当前页面为前端静态数据）
- 真实权限系统与登录态校验
- 性能压测与安全渗透测试

## 3. 测试环境与数据

| 项目 | 配置 |
|---|---|
| 系统 | macOS / Windows 11 |
| 浏览器 | Chrome 最新版（主），Safari 最新版（辅），Edge 最新版（辅） |
| 分辨率 | 1920x1080、1440x900、768x1024、390x844 |
| 入口URL | `http://localhost:8080/menu-management.html` |
| 关键测试设备 | `RCK111`、`RCK112`、`RCK113` |
| 预置本地存储 | `localStorage.menuProductEdits`（含至少1条商品编辑数据） |

## 4. 测试策略
- 功能测试：按模块执行正向、逆向、边界场景。
- 交互测试：关注下拉、弹窗、Toast、确认框、页面跳转。
- 数据联动测试：校验统计卡片、语言标签、商品状态是否实时更新。
- 兼容性测试：跨浏览器与核心分辨率验证。
- 回归策略：每次菜单管理相关样式或JS逻辑改动后执行P0/P1用例。

## 5. 测试用例

### 5.1 P0（阻塞级）
| 用例ID | 功能点 | 前置条件 | 操作步骤 | 预期结果 |
|---|---|---|---|---|
| MM-P0-001 | 页面加载 | 服务已启动 | 打开 `menu-management.html` | 页面加载成功，无白屏/报错，左侧“菜单管理”高亮 |
| MM-P0-002 | 设备搜索切换 | 默认设备 `RCK111` | 输入 `RCK112` 回车 | 成功切换设备，顶部设备Tag更新，Toast提示切换成功 |
| MM-P0-003 | 设备搜索异常 | 页面已打开 | 输入 `RCK999` 回车 | 提示“设备不存在”，输入框回填当前设备 |
| MM-P0-004 | 新增语言成功 | 当前设备支持多语言 | 点击“+新增语言”并输入 `fr` / `Français` 后提交 | 新语言加入标签和统计，弹窗列表即时更新 |
| MM-P0-005 | 删除最后语言保护 | 当前设备仅1种语言 | 在语言管理中尝试删除该语言 | 删除被阻止，提示“至少需要保留一种语言” |
| MM-P0-006 | 新增分类成功 | 页面已打开 | 新建分类并填写主语言名称 | 分类新增成功，分类数量+1，分类卡片出现 |
| MM-P0-007 | 新增商品成功 | 至少存在1个分类 | 新增商品并填写主语言名、价格>0 | 商品新增成功，商品出现在分类下，统计联动更新 |
| MM-P0-008 | 商品上下架 | 存在可操作商品 | 点击商品“上架/下架”按钮 | 商品状态切换成功，“菜单商品数”按在售数实时变化 |
| MM-P0-009 | 商品详情跳转 | 存在商品卡片 | 点击商品卡片 | 跳转 `product-detail.html`，URL包含 `id/product/category/device` 参数 |

### 5.2 P1（高优先级）
| 用例ID | 功能点 | 前置条件 | 操作步骤 | 预期结果 |
|---|---|---|---|---|
| MM-P1-001 | 搜索下拉显示 | 页面已打开 | 聚焦设备输入框 | 展示全部候选设备下拉 |
| MM-P1-002 | 搜索模糊唯一匹配 | 页面已打开 | 输入唯一可模糊匹配值后回车 | 自动匹配并切换到目标设备 |
| MM-P1-003 | 搜索模糊多匹配 | 页面已打开 | 输入 `RCK11` 回车 | 不切换设备，提示需完整设备编号 |
| MM-P1-004 | 搜索大小写容错 | 页面已打开 | 输入 `rck111` 回车 | 成功匹配并切换（大小写不敏感） |
| MM-P1-005 | 点击下拉选项切换 | 下拉已展开 | 点击任一设备选项 | 切换成功，下拉收起 |
| MM-P1-006 | 点击空白收起下拉 | 下拉已展开 | 点击输入框外区域 | 下拉收起 |
| MM-P1-007 | 新增语言必填校验 | 打开语言弹窗 | 语言代码为空或名称为空提交 | 阻止提交并提示对应错误 |
| MM-P1-008 | 新增重复语言 | 已存在 `en` | 再次新增 `en` | 阻止新增并提示“该语言已存在” |
| MM-P1-009 | 删除语言确认框 | 设备语言数>1 | 点击删除并选择“取消” | 语言不变，界面不刷新 |
| MM-P1-010 | 分类重名校验 | 已存在某分类 | 新建同名分类 | 阻止新增并提示“分类名称已存在” |
| MM-P1-011 | 分类编辑 | 已存在分类 | 执行分类编辑并改名 | 分类名称更新成功，分类下商品保留 |
| MM-P1-012 | 分类删除级联 | 目标分类下有商品 | 删除分类并确认 | 分类及其商品均被移除，统计同步减少 |
| MM-P1-013 | 商品必填校验 | 打开商品弹窗 | 缺失分类/主语言名/价格<=0提交 | 阻止提交并提示对应错误 |
| MM-P1-014 | 商品编辑并跨分类迁移 | 至少2个分类 | 编辑商品并切换所属分类保存 | 商品从原分类移除并出现在新分类 |
| MM-P1-015 | 统计卡联动 | 执行增删改操作 | 观察“菜单商品数/推荐商品/分类数/支持语言” | 统计值与实际数据一致 |

### 5.3 P2（中优先级）
| 用例ID | 功能点 | 前置条件 | 操作步骤 | 预期结果 |
|---|---|---|---|---|
| MM-P2-001 | 平台语言下拉渲染 | 页面已打开 | 展开顶部语言选择器 | 可见中文/English/日本語/한국어/ไทย选项 |
| MM-P2-002 | 平台语言切换 | 页面已打开 | 切换语言下拉值 | 控件可切换，页面不报错 |
| MM-P2-003 | 本地存储编辑数据读取 | 设置 `menuProductEdits` | 刷新页面 | 商品展示应用本地编辑结果 |
| MM-P2-004 | Toast显示时长 | 任意触发Toast | 观察消息显示和消失 | 约2秒后自动消失，无残留遮挡 |
| MM-P2-005 | 桌面布局稳定性 | 1920x1080 | 完整浏览页面与弹窗 | 元素对齐，无明显重叠/错位 |
| MM-P2-006 | 移动端冒烟 | 390x844 | 打开页面并执行搜索/新增弹窗 | 核心操作可完成，无致命布局断裂 |

## 6. 缺陷分级与处理
- `S0`：页面不可用、主链路中断（阻塞上线）
- `S1`：关键功能异常但有临时替代路径（需上线前修复）
- `S2`：一般功能或样式问题（可排期修复）
- `S3`：低影响视觉/文案问题（优化项）

## 7. 准入与准出标准

### 7.1 准入
- 页面代码已合并到测试分支，且本地可启动。
- 测试环境可访问 `menu-management.html`。
- 测试数据已准备（至少3台设备、至少2个分类、至少3个商品）。

### 7.2 准出（可量化）
- P0 用例通过率 `100%`。
- P1 用例通过率 `>= 95%`，且无未关闭 `S0/S1` 缺陷。
- P2 用例通过率 `>= 90%`。
- 关键回归链路（搜索→切换设备→编辑菜单→跳详情）连续执行3轮无失败。

## 8. 回归建议
- 每次修改以下文件后必须执行本计划P0+P1：
  - `/Users/tigerhuang/cofeplus/menu-management.html`
  - `/Users/tigerhuang/cofeplus/product-detail.html`
  - `/Users/tigerhuang/cofeplus/overview.html`（如复用头部组件时）
- 发布前至少完成一次跨浏览器冒烟（Chrome/Safari/Edge）。
